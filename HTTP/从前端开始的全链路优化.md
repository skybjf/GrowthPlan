# 从前端开始的全链路优化


## 一、计算机网络体系结构分层

![计算机网络体系结构分层](
https://raw.githubusercontent.com/skybjf/GrowthPlan/master/HTTP/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E5%88%86%E5%B1%82.png
)
注：开放式系统互连 OSI（Open Systems Interconnection reference，OSI）

* **应用层**  决定了向用户提供应用服务时通信的活动。
* **表示层**  数据表示形式的控制层，其主要功能是把应用层提供的信息变换为能够共同理解的形式，提供字符代码、数据格式、控制信息格式、加密等的统一表示。
* **会话层**  会话单位的控制层，其主要功能是按照在应用进程之间约定的原则，按照正确的顺序收、发数据，进行各种形态的对话。会话层规定了会话服务用户间会话连接的建立和拆除规程以及数据传送规程。
* **传输层** 提供处于网络连接中的两台计算机之间的数据传输。
* **网络层** 用来处理在网络上流动的数据包。数据包是网络传输的最小数据单位。与对方计算机之间通过多台计算机或网络设计被进行传输时，网络层所起的作用就是在众多的选项内选择一条传输路线。
* **数据链路层** 为网络层提供数据传送服务的。数据链路的建立，拆除，对数据的检错，纠错是数据链路层的基本任务。
* **物理层** 为设备之间的数据通信提供传输媒体及互连设备，为数据传输提供可靠的环境。

## 二、从输入URL到页面响应，经历了哪些过程
![计算机网络体系结构分层](https://raw.githubusercontent.com/skybjf/GrowthPlan/master/HTTP/browserURL.jpg
)
当我们在浏览器中输入URL时，浏览器必须知道咱们是要访问服务器的IP，才可以。所以浏览器第一步j检查域名是否在本地缓存中，w㘝不再，会走DNS查找查找目标的IP。找到IP之后，会包装`套接字`送到**数据链路层**，进行`三次握手`在客户端与服务端之间创建TCP链接，与此同时，发送了HTTP请求，HTTP服务器处理请求，当服务器提供了资源(images, js, css)之后，浏览器会解析HTML、js、css，构建 DOM 树 -> 渲染 -> 布局 -> 绘制。


## 三、如何优化

* 减小文件体积
* 减少单个页面的请求数，合理的资源合并或采用HTTP2.0
* 减少单个页面内资源请求的域名,从而减少单个页面内DNS查找次数
* Gzip 压缩文件
* 配置Etags
* 为文件头指定Expires或Cache-Control
* 合理利用keep-alive